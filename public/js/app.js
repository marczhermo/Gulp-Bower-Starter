/*!
 * Contact Form and AntiSpam Javascript Plugin
 * Author: Marcz Hermo
 * Email: marcz@lab1521.com
 * Copyright 2015 Lab1521 Limited
 */
smoothScroll.init({speed:1e3,easing:"easeInOutCubic",offset:0,updateURL:!0,callbackBefore:function(){},callbackAfter:function(){}}),function(t){"use strict";var n=function(t,n,s,e){this.$inputAnswer=t,this.$inputToken=n,this.$inputRefresh=s,this.$inputQuestion=e,this.answer="",this.token="",this.url="contact.php",this.init()};n.prototype.init=function(){this.reload(),this.$inputRefresh.on("click",this.reload.bind(this))},n.prototype.reload=function(){t.when(t.ajax({url:this.url,dataType:"json"})).done(this.update.bind(this))},n.prototype.update=function(t){this.$inputToken.val(t.client),this.$inputQuestion.text(t.question),this.$inputAnswer.val("")};var s=function(t,n){this.antiSpam=n,this.$form=t,this.url="contact.php"};s.prototype.post=function(n){t.when(t.ajax({url:this.url,data:n,dataType:"json",type:"POST"})).done(this.update.bind(this))},s.prototype.update=function(t){t.success===!0&&this.success(),this.warnings.call(this,t)},s.prototype.success=function(){var n=this.$form,s=n.find(".form-alert").show(),e=t(".alert",s).removeClass("alert-danger").addClass("alert-success");e.html("<strong>Success!</strong> We will contact you as soon as possible.");var i=n.find(".glyphicon");i.removeClass("glyphicon-remove glyphicon-ok").addClass("glyphicon-asterisk"),n.find("input").val(""),n.find("textarea").val("")},s.prototype.warnings=function(n){var s=n.notices,e=this;this.antiSpam.reload();for(var i=0;i<s.length;i++){var o=s[i];t.each(o,function(t,n){e.warn.call(e,t,n)})}},s.prototype.warn=function(t,n){var s=this.$form,e=s.find("[name="+t+"] ~ .glyphicon");e.length?e.removeClass("glyphicon-asterisk glyphicon-ok").addClass("glyphicon-remove"):"antiSpamAnswer"!=t&&"antiSpamToken"!=t&&this.showError.call(this,n)},s.prototype.showError=function(n){var s=this.$form,e=s.find(".form-alert").show(),i=t(".alert",e).removeClass("alert-success").addClass("alert-danger");i.html("<strong>Error!</strong> "+n)},s.prototype.hideAlert=function(){var n=this.$form,s=n.find(".form-alert").hide();t(".alert",s).removeClass("alert-success alert-danger").html("")},s.prototype.submit=function(t){var n=this.$form;this.hideAlert();for(var s=0;s<t.length;s++){var e=t[s],i=n.find("[name="+e.name+"] ~ .glyphicon");if(""==e.value)return i.removeClass("glyphicon-asterisk glyphicon-ok").addClass("glyphicon-remove"),void n.find("[name="+e.name+"]").focus();i.removeClass("glyphicon-asterisk glyphicon-remove").addClass("glyphicon-ok")}this.post.call(this,t)},t(function(){var e=new n(t("#antiSpamAnswer"),t("#antiSpamToken"),t("#antiSpamRefresh"),t("#antiSpamQuestion")),i=new s(t("#contactForm"),e);t("#contactForm").on("submit",function(n){i.submit.call(i,t(this).serializeArray()),n.preventDefault()})})}(jQuery);